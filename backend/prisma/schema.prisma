datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  // previewFeatures = []
}

generator dbml {
  provider = "prisma-dbml-generator"
}

enum Sender {
  customer
  salesperson
}

model ChatMessage {
  id            Int      @id @default(autoincrement())
  content       String
  sender        Sender
  customerId    Int
  salespersonId Int
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  customer    Customer    @relation(fields: [customerId], references: [id])
  salesperson Salesperson @relation(fields: [salespersonId], references: [id])
}

model Customer {
  id          Int           @id @default(autoincrement())
  name        String
  email       String        @unique
  cpf         String        @unique
  webSite     String
  phone       String
  role        String
  companyName String
  companyCnpj String
  employees   Int
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  chatMessage ChatMessage[]
}

model Salesperson {
  id          Int           @id @default(autoincrement())
  name        String
  email       String        @unique
  phone       String
  position    String
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  chatMessage ChatMessage[]
}
